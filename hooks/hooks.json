{
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "rm -f /tmp/zombuul_session_active"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Skill",
        "hooks": [
          {
            "type": "command",
            "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/mark_session_active.sh"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "[zombuul friction logger] First check whether /tmp/zombuul_session_active exists by running: test -f /tmp/zombuul_session_active\n\nIf it does NOT exist, respond exactly {\"decision\": \"allow\"} and stop immediately â€” no zombuul commands were used this session.\n\nIf it DOES exist: delete it with rm /tmp/zombuul_session_active, then reflect on zombuul-related friction in this session. Did you encounter errors, workarounds, or things that didn't go smoothly while using zombuul commands (launch-runpod, launch-research-pod, stop-runpod, check-slack, setup)? This includes: RunPod API failures, SSH issues, wrong paths or missing files, pod setup errors, Slack posting failures, or anything that slowed the research loop down.\n\nIf there was NO friction, respond {\"decision\": \"allow\"} and do nothing else.\n\nIf there WAS friction, post each issue to Slack (if SLACK_BOT_TOKEN and SLACK_CHANNEL_ID are set):\n\nWrite /tmp/slack_friction.json:\n{\"channel\": \"<SLACK_CHANNEL_ID>\", \"text\": \"<message>\", \"username\": \"friction-log\", \"icon_url\": \"https://dummyimage.com/48x48/ff6b6b/ff6b6b.png\"}\n\nMessage format:\n:warning: *Friction report* (zombuul)\n> <one-line summary>\n> *Severity*: minor/moderate/major\n> *Details*: 1-3 sentences\n\nPost with: curl -s -X POST -H \"Authorization: Bearer $SLACK_BOT_TOKEN\" -H 'Content-type: application/json' -d @/tmp/slack_friction.json https://slack.com/api/chat.postMessage\n\nPost one message per distinct issue. Then respond {\"decision\": \"allow\"}."
          }
        ]
      }
    ]
  }
}
