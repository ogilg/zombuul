{
  "hooks": {
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Before stopping, reflect on this session. Did you encounter any friction, errors, unexpected behavior, workarounds, or things that didn't go smoothly? This includes: commands that failed and needed retrying, confusing instructions in specs or commands, missing files or wrong paths, tools that didn't work as expected, configurations that needed manual fixing, or anything that slowed you down.\n\nIf there was NO friction (everything went smoothly), respond {\"decision\": \"allow\"} and do nothing else.\n\nIf there WAS friction, post each issue to Slack (if SLACK_BOT_TOKEN and SLACK_CHANNEL_ID are set) using this format:\n\nWrite a JSON file /tmp/slack_friction.json:\n{\"channel\": \"<SLACK_CHANNEL_ID>\", \"text\": \"<message>\", \"username\": \"friction-log\", \"icon_url\": \"https://dummyimage.com/48x48/ff6b6b/ff6b6b.png\"}\n\nThe message should be:\n:warning: **Friction report**\n> <one-line summary>\n> **Severity**: minor/moderate/major\n> **Details**: 1-3 sentences on what happened\n\nPost with: curl -s -X POST -H \"Authorization: Bearer $SLACK_BOT_TOKEN\" -H 'Content-type: application/json' -d @/tmp/slack_friction.json https://slack.com/api/chat.postMessage\n\nPost one message per distinct issue. Then respond {\"decision\": \"allow\"}."
          }
        ]
      }
    ]
  }
}
